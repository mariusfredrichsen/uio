"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useOpenState = void 0;
var _react = require("react");
/**
 * @param {Object} args
 * @param {string} args.path
 * @param {string} [args.errorMessage]
 * @param {string} [args.autoExpandLoadingError]
 * @param {string[]} args.expanded
 * @param {Function} [args.onExpand]
 * @param {Function} [args.onCollapse]
 * @returns {Object}
 */
const useOpenState = _ref => {
  let {
    path,
    expanded,
    onExpand,
    onCollapse,
    errorMessage,
    autoExpandLoadingError
  } = _ref;
  const autoExpand = autoExpandLoadingError && !!errorMessage;
  const [openedOnceDueToError, setOpenedOnce] = (0, _react.useState)(!!errorMessage);
  (0, _react.useEffect)(() => {
    if (autoExpand && !openedOnceDueToError) {
      onExpand({
        path
      });
      setOpenedOnce(true);
    }
  }, [autoExpand, openedOnceDueToError]);
  const open = autoExpand && !openedOnceDueToError || !!expanded.includes(path);
  const onToggleOpen = () => !open ? onExpand({
    path
  }) : onCollapse({
    path
  });
  return {
    open,
    onToggleOpen,
    openedOnceDueToError
  };
};
exports.useOpenState = useOpenState;