"use strict";

var _cypressCucumberPreprocessor = require("@badeball/cypress-cucumber-preprocessor");
(0, _cypressCucumberPreprocessor.Given)('the detector is not intersecting with the root', () => {
  cy.visitStory('IntersectionDetector', 'Out Of View');
  cy.window().should(win => expect(win.onChange).to.not.be.undefined);
  cy.window().its('onChange').as('onChangeStub', {
    static: true
  }).should('be.calledOnce').should('be.calledWith', {
    isIntersecting: false
  });
});
(0, _cypressCucumberPreprocessor.Given)('the detector is intersecting with the root', () => {
  cy.visitStory('IntersectionDetector', 'In View');
  cy.window().should(win => expect(win.onChange).to.not.be.undefined);
  cy.window().its('onChange').as('onChangeStub', {
    static: true
  }).should('be.calledOnce').should('be.calledWith', {
    isIntersecting: true
  });
});
(0, _cypressCucumberPreprocessor.When)('the user scrolls the detector into view', () => {
  // using 311 to scroll 1px more than "just enough"
  cy.get('[data-test="scroll-container"]').scrollTo(0, 311);
});
(0, _cypressCucumberPreprocessor.When)('the user scrolls the detector out of view', () => {
  // Scroll 1px more than "just enough" to make sure
  // the detector is completely hidden
  cy.get('[data-test="scroll-container"]').scrollTo(0, 201);
});
(0, _cypressCucumberPreprocessor.Then)('the callback passed to onChange should be called', () => {
  cy.get('@onChangeStub').should(stub => {
    expect(stub).to.be.calledTwice;
  });
});
(0, _cypressCucumberPreprocessor.Then)('the isIntersecting prop of its payload should be true', () => {
  cy.get('@onChangeStub').should('be.calledWith', {
    isIntersecting: true
  });
});
(0, _cypressCucumberPreprocessor.Then)('the isIntersecting prop of its payload should be false', () => {
  cy.get('@onChangeStub').should('be.calledWith', {
    isIntersecting: false
  });
});