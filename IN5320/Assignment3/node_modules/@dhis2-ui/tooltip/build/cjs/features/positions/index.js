"use strict";

var _cypressCucumberPreprocessor = require("@badeball/cypress-cucumber-preprocessor");
var _constants = require("../common/constants.js");
var _getReferenceAndBodyPositions = require("../common/getReferenceAndBodyPositions.js");
var _getReferenceAndContentPositions = require("../common/getReferenceAndContentPositions.js");
// On my linux machine a tolerance of 1 wasn't enough :shrug:
const APPROXIMATION_TOLERANCE = 2;

// Stories
(0, _cypressCucumberPreprocessor.Given)('there is not enough space between the reference element top and the body top to fit the Tooltip', () => {
  cy.visitStory('Tooltip', 'Flipped Vertically');
});
(0, _cypressCucumberPreprocessor.Given)('there is enough space between the anchor bottom and the body bottom to fit the Tooltip', () => {
  (0, _getReferenceAndBodyPositions.getReferenceAndBodyPositions)().should(_ref => {
    let [refPos, bodyPos] = _ref;
    expect(bodyPos.bottom).to.be.greaterThan(refPos.bottom + _constants.TOOLTIP_OFFSET + _constants.TOOLTIP_HEIGHT);
  });
});
(0, _cypressCucumberPreprocessor.Given)('there is limited space available to the left of the anchor', () => {
  cy.visitStory('Tooltip', 'Adjusted Horizontal Position');
});
(0, _cypressCucumberPreprocessor.Then)('the horizontal center of the Tooltip is aligned with the horizontal center of the anchor', () => {
  (0, _getReferenceAndContentPositions.getReferenceAndContentPositions)().should(_ref2 => {
    let [refPos, contentPos] = _ref2;
    const refCenterX = refPos.left + refPos.width / 2;
    const contentCenterX = contentPos.left + contentPos.width / 2;
    expect(refCenterX).to.be.approximately(contentCenterX, APPROXIMATION_TOLERANCE);
  });
});
(0, _cypressCucumberPreprocessor.Then)('the horizontal center of the Tooltip is to the right of the horizontal center of the anchor', () => {
  (0, _getReferenceAndContentPositions.getReferenceAndContentPositions)().should(_ref3 => {
    let [refPos, contentPos] = _ref3;
    const contentCenterX = contentPos.left + contentPos.width / 2;
    const refCenterX = refPos.left + refPos.width / 2;
    expect(contentCenterX).to.be.greaterThan(refCenterX);
  });
});
(0, _cypressCucumberPreprocessor.Then)('there is some space between the anchor bottom and the Tooltip top', () => {
  (0, _getReferenceAndContentPositions.getReferenceAndContentPositions)().should(_ref4 => {
    let [refPos, contentPos] = _ref4;
    expect(refPos.bottom + _constants.TOOLTIP_OFFSET).to.be.approximately(contentPos.top, APPROXIMATION_TOLERANCE);
  });
});
(0, _cypressCucumberPreprocessor.Then)('there is some space between the anchor top and the Tooltip bottom', () => {
  (0, _getReferenceAndContentPositions.getReferenceAndContentPositions)().should(_ref5 => {
    let [refPos, contentPos] = _ref5;
    expect(refPos.top).to.be.approximately(contentPos.bottom + _constants.TOOLTIP_OFFSET, APPROXIMATION_TOLERANCE);
  });
});
(0, _cypressCucumberPreprocessor.Then)('the Tooltip is rendered below the anchor', () => {
  (0, _getReferenceAndContentPositions.getReferenceAndContentPositions)().should(_ref6 => {
    let [refPos, contentPos] = _ref6;
    expect(contentPos.top).to.be.approximately(refPos.bottom + _constants.TOOLTIP_OFFSET, APPROXIMATION_TOLERANCE);
  });
});