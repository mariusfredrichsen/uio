"use strict";

var _cypressCucumberPreprocessor = require("@badeball/cypress-cucumber-preprocessor");
(0, _cypressCucumberPreprocessor.Given)('reordering of items is enabled', () => {
  // no op
});
(0, _cypressCucumberPreprocessor.Given)('the selected list has three items', () => {
  cy.visitStory('Transfer Reorder Buttons', 'Has Some Selected');
});
(0, _cypressCucumberPreprocessor.Given)('the selected list has some items', () => {
  cy.visitStory('Transfer Reorder Buttons', 'Has Some Selected');
});
(0, _cypressCucumberPreprocessor.Given)('the {int}. item is highlighted', previousPosition => {
  const index = previousPosition - 1;
  console.log('> index', index);
  cy.get('{transfer-pickedoptions} {transferoption}').eq(index).invoke('attr', 'data-value').as('previousValue', {
    type: 'static'
  });
  cy.get('{transfer-pickedoptions} {transferoption}').eq(index).as('previous').click();
});
(0, _cypressCucumberPreprocessor.Given)('no items are highlighted in the list', () => {
  cy.get('{transfer-pickedoptions} {transferoption}.highlighted').should('not.exist');
});
(0, _cypressCucumberPreprocessor.Given)('more than one item is highlighted in the list', () => {
  cy.get('{transfer-pickedoptions} {transferoption}').filter(index => index < 2).each($option => cy.wrap($option).clickWith('ctrl'));
});
(0, _cypressCucumberPreprocessor.When)("the user clicks the 'move up' button", () => {
  // force, so we click disabled buttons
  cy.get('{transfer-reorderingactions-buttonmoveup}').click({
    force: true
  });
});
(0, _cypressCucumberPreprocessor.When)("the user clicks the 'move down' button", () => {
  // force, so we click disabled buttons
  cy.get('{transfer-reorderingactions-buttonmovedown}').click({
    force: true
  });
});
(0, _cypressCucumberPreprocessor.Then)('the highlighted item should be moved to the {int}. place', next => {
  const index = next - 1;
  cy.get('@previousValue').then(previousValue => cy.get(`[data-value="${previousValue}"]`)).invoke('index').should('equal', index);
});
(0, _cypressCucumberPreprocessor.Then)("the 'move up' and 'move down' buttons should be disabled", () => {
  cy.get('{transfer-reorderingactions-buttonmoveup}').should('have.attr', 'disabled');
  cy.get('{transfer-reorderingactions-buttonmovedown}').should('have.attr', 'disabled');
});