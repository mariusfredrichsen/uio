"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.OnlineStatus = OnlineStatus;
var _style = _interopRequireDefault(require("styled-jsx/style"));
var _appRuntime = require("@dhis2/app-runtime");
var _classnames = _interopRequireDefault(require("classnames"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _react = _interopRequireDefault(require("react"));
var _index = _interopRequireDefault(require("./locales/index.js"));
var _onlineStatusStyles = _interopRequireDefault(require("./online-status.styles.js"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/** A badge to display online/offline status in the header bar */
function OnlineStatus(_ref) {
  let {
    dense
  } = _ref;
  const {
    isConnected: online
  } = (0, _appRuntime.useDhis2ConnectionStatus)();
  const {
    onlineStatusMessage
  } = (0, _appRuntime.useOnlineStatusMessage)();
  const displayStatus = online ? _index.default.t('Online') : _index.default.t('Offline');
  return /*#__PURE__*/_react.default.createElement("div", {
    "data-test": "headerbar-online-status",
    className: `jsx-${_onlineStatusStyles.default.__hash}` + " " + ((0, _classnames.default)('container', dense ? 'bar' : 'badge') || "")
  }, onlineStatusMessage && !dense && /*#__PURE__*/_react.default.createElement("span", {
    className: `jsx-${_onlineStatusStyles.default.__hash}` + " " + "info unselectable"
  }, onlineStatusMessage), /*#__PURE__*/_react.default.createElement("div", {
    className: `jsx-${_onlineStatusStyles.default.__hash}` + " " + ((0, _classnames.default)('icon', online ? 'online' : 'offline') || "")
  }), /*#__PURE__*/_react.default.createElement("span", {
    className: `jsx-${_onlineStatusStyles.default.__hash}` + " " + "label unselectable"
  }, displayStatus), onlineStatusMessage && dense && /*#__PURE__*/_react.default.createElement("span", {
    className: `jsx-${_onlineStatusStyles.default.__hash}` + " " + "info-dense unselectable"
  }, onlineStatusMessage), /*#__PURE__*/_react.default.createElement(_style.default, {
    id: _onlineStatusStyles.default.__hash
  }, _onlineStatusStyles.default));
}
OnlineStatus.propTypes = {
  /** If true, displays as a sub-bar instead of a badge */
  dense: _propTypes.default.bool
};